var H=(s,e)=>r=>{r.querySelectorAll("[".concat(e,"]")).forEach(c=>{let t=c.getAttribute("".concat(e));s.subscribe(n=>{c.textContent=n[t]})})},x=(s,e)=>r=>{r.querySelectorAll("[".concat(e,"]")).forEach(c=>{let t=c.getAttribute("".concat(e)),n=s[t];c.addEventListener("click",a=>{n(a)})})},f=(s,e)=>r=>{r.querySelectorAll("[".concat(e,"]")).forEach(c=>{let t=c.getAttribute("".concat(e)),n=s[t];c.addEventListener("keyup",a=>{n(a)})})},$=(s,e)=>r=>{let l=r.querySelectorAll("[".concat(e,"]"));Array.from(l).forEach(t=>{s.subscribe(n=>{let a=document.createDocumentFragment(),d=t.getAttribute("".concat(e)),b=n[d],y=t.getAttribute("template-id"),u=JSON.parse(t.getAttribute("template-props")),m=document.getElementById(y);b.forEach((h,A)=>{let i=m.content.cloneNode(!0),p=i.children[0];p.id=h.id,Object.keys(u).forEach(o=>{p.setAttribute(o,h[u[o]])}),i.querySelectorAll("[x-text]").forEach(o=>{let E=o.getAttribute("x-text");s.subscribe(k=>{o.textContent=k[d][A][E]})}),a.appendChild(i)}),t.innerHTML="",t.appendChild(a)})})},L=s=>{let e=s().name;class r extends HTMLElement{constructor(){super()}async connectedCallback(){let c=s();e=c.name,this.innerHTML=c.render(),c.bindings.forEach(t=>{t.type==="text"&&H(t.data,t.tag)(this),t.type==="click"&&x(t.data,t.tag)(this),t.type==="change"&&f(t.data,t.tag)(this),t.type==="list"&&$(t.data,t.tag)(this)})}}customElements.define(e,r)};export{L as default};
